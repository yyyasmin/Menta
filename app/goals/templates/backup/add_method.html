{% extends "layout.html" %} 

{% block content %}

{% with from_dst_sort_order=3 %} 
	{% include "goal_title.html" %} 
{% endwith %} 

<style>
button.accordion {
    background-color: #eee;
    color: #444;
    cursor: pointer;
    padding: 18px;
    width: 100%;
    border: none;
    #text-align: left;
    outline: none;
    font-size: 15px;
    transition: 0.4s;
}

button.accordion.active, button.accordion:hover {
    background-color: #ddd;
}

button.accordion:after {
    content: '\002B';
    color: #777;
    font-weight: bold;
    float: right;
    margin-left: 5px;
}

button.accordion.active:after {
    content: "\2212";
}

div.panel {
    padding: 0 18px;
    background-color: white;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
}

ul.tabs {
  display: flex;
  flex-wrap: nowrap;
  align-items: stretch;
  list-style-type: none;
  margin: 0;
  padding: 0;
}

ul.tabs>li.tab {
  flex: 1;
  #text-align: center;
  /* just adding visibility to the tabs */
  border: 1px solid rgba(0,0,0,.12); 
  padding: 10px;
}


#submit_button {
	display: block;
	margin: 0 auto;
	width:fit-content;
}


ul.tabs {
  display: flex;
  flex-wrap: nowrap;
  align-items: stretch;
  list-style-type: none;
  margin: 0;
  padding: 0;
}

ul.tabs>li.tab {
  flex: 1;
  text-align: center;
  /* just adding visibility to the tabs */
  border: 1px solid rgba(0,0,0,.12); 
  padding: 10px;
}


input {
	width: 100%;
}

#submit_button {
	display: block;
	margin: 0 auto;
	width:fit-content;
}

</style>

	</br>

	<!-- FROM https://www.tutorialspoint.com/flask/flask_wtf.htm -->		
	<!-- <div style = "font-size:20px; font-weight:bold;  float:right; text-align:center; width:100%"> -->
	<div style = "text-align:center; width:100%">
		<fieldset>
			<form method="post" action="{{ url_for('destinations.dsply_dst_form', from_dst_sort_order=from_dst_sort_order) }}">
				
				<div>
					<legend>מטרה חדשה:</legend>
					{{ form.hidden_tag() }}
				</div>
					
				{{ form.csrf_token }}


				<ul class="tabs">
				

				
					<li class="tab " id="tab-2"><span class="tab-title">
						<div id="tag_div">
							<div> {{form.method_type.label}}: {{form.method_type}}</div>
							{% if form.method_type.errors %}
								<ul class=errors>
									{% for error in form.who.errors %}
										<li>{{ error }}</li>
									{% endfor %}
								</ul>
							{% endif %}
						</div>   <!-- tag_div -->
					</li>
				
			
				
					<li class="tab " id="tab-2"><span class="tab-title">
						<div id="tag_div">
							<div> {{form.who.label}}: {{form.who}}</div>
							{% if form.tag.errors %}
								<ul class=errors>
									{% for error in form.who.errors %}
										<li>{{ error }}</li>
									{% endfor %}
								</ul>
							{% endif %}
						</div>   <!-- tag_div -->
					</li>
								
					
				</ul>

				<br><br>
				
				<div class="form-group">				
					<label for="title">דרך הוראה, שיטות, אמצעים ומשאבים </label>
					<input type="title" class="form-control" name="title">			
				</div>
			
				</br>
				
				<div class="form-group">
					<div>
						<label for="method_body">תאור</label>
						<textarea style="align:center; max-width:100%;" 
								  class='autoExpand' rows="10" cols="80" id="method_body" name="body"></textarea>						  
					</div> 
				</div>
			
				
				<br><br>
				
				<div id="submit_button"> {{form.submit}} </div>
				
				<br>
				
			</form>
		</fieldset>
	</div>
	<!-- FROM https://www.tutorialspoint.com/flask/flask_wtf.htm -->					



<!-- FROM https://github.com/PrettyPrinted/dynamic_select_flask_wtf_javascript -->
<script>
	var ar_select = document.getElementById("ar");
	var tag_select = document.getElementById("tag");

	ar_select.onchange = function()  {
		 
		ar = ar_select.value;
		
		fetch('/tag/' + ar).then(function(response) {

			response.json().then(function(data) {
				var optionHTML = '';

				for (var tag of data.tags) {
					optionHTML += '<option value="' + tag.id + '">' + tag.title + '</option>';
				}

				tag_select.innerHTML = optionHTML;
			})
			
		});
	}
</script>

<script>
	vtag tag_select = document.getElementById("tag");
	vtag scrt_select = document.getElementById("scrt");

	tag_select.onchange = function()  {
		 
		tag = tag_select.value;
		
		fetch('/scrt/' + tag).then(function(response) {

			response.json().then(function(data) {
				vtag optionHTML = '';

				for (vtag scrt of data.scrts) {
					optionHTML += '<option value="' + scrt.id + '">' + scrt.title + '</option>';
				}

				scrt_select.innerHTML = optionHTML;
			})
			
		});
	}
</script>
<!-- FROM https://github.com/PrettyPrinted/dynamic_select_flask_wtf_javascript -->


{% endblock %}


<script>
    $(document).ready(function() {
        $('#multiple-checkboxes').multiselect({
          includeSelectAllOption: true,
        });
    });

</script>