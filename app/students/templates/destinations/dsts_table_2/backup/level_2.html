	<!-- FROM https://www.youtube.com/watch?v=XTpLbBJTOM4 -->

{% block plan_report_show_std_dsts %}

	{% set tp_ns = namespace(tag_printed=False) %}
	{% set stp_ns = namespace(sub_tag_printed=False) %}
	{% set g_ns = namespace(goal_printed=False) %}
	{% set d_ns = namespace(dst_printed=False) %}
	{% set g_ns = namespace(goal_printed=False) %}
	{% set m_ns = namespace(method_printed=False) %}
	{% set mt_ns = namespace(method_type_printed=False) %}
	{% set w_ns = namespace(who_printed=False) %}
	
	{% for tag in tags %} 
		{% set tp_ns.tag_printed = False %}
	
			{% for dst in student_dsts if dst.is_parent_of(tag) %}	
				{% set d_ns.dst_printed = False %}
									
				{% for goal in student_goals if dst.is_parent_of(goal) %}
					{% set g_ns.goal_printed = False %}
<!-- DEBUG -->

<!-- DEBUG -->

						{% for method in student_methods if goal.is_parent_of(method)  %}  <!-- METHODS COLUMN -->
							{% set m_ns.method_printed = False %}
														
							{% for method_type in method_types if method.is_parent_of(method_type)  %}  <!-- METHODS-TYPES COLUMN -->
								{% set mt_ns.method_type_printed = False %}
							

								{% for who in whos if method.is_parent_of(who)  %}  <!-- METHODS COLUMN -->
								
								<tr>
								
									{% if tp_ns.tag_printed == False %}  <!-- TAGS -->
										<td>
											{{ tag.title|replace("-", "\n") }}
										</td>
										{% set tp_ns.tag_printed = True %}
									{% else %}
										<td></td>
									{% endif %}  <!-- END TAGS -->
																						
									
									{% if d_ns.dst_printed == False %}  <!-- DSTS -->
										<td>
											<div type="button" style="color:black;" id="green_title" 
															   onclick="myFunction('{{dst.id}}')">
												מטרה: {{ dst.title }} 
																												
												{% for sts in statuss %}	
													{% for st in std_txts %}
														{% if st.general_txt_id==dst.id %}
															{% if st.status_id==sts.id %}
																<span style="background-color:{{ sts.color }}">{{ sts.title }}</span>
															{% endif %}
														{% endif %}
													{% endfor %}
												{% endfor %}				
											</div>
											
											<div type="button" style="color:black; background:'#e6ffe6'" 
															   id="{{dst.id}}" class="w3-hide  w3-center green_body">
												{{dst.body}}
											</div>
										</td>
										{% set d_ns.dst_printed = True %}
									{% else %}
										<td></td>
									{% endif %}  <!-- END DSTS -->
									
									{% if g_ns.goal_printed == False %}  <!-- GOALS -->
										<td>									
											<div type="button" style="color:black;" id="blue_title" onclick="myFunction('{{goal.id}}')">
												יעד: {{ goal.title }} 
																												
												{% for sts in statuss %}	
													{% for st in std_txts %}
														{% if st.general_txt_id==goal.id %}
															{% if st.status_id==sts.id %}
																<span style="background-color:{{ sts.color }}">{{ sts.title }}</span>
															{% endif %}
														{% endif %}
													{% endfor %}
												{% endfor %}				
											</div>
											
											<div type="button" style="color:black;" id="{{goal.id}}" class="w3-hide  w3-center blue_body">
												{{goal.body}}
											</div>
										</td>
										{% set g_ns.goal_printed = True %}
									{% else %}
										<td></td>
									{% endif %}  <!-- END GOALS -->


							<td>
							<table calss="purple_table" style="max-width:100%">
								
									{% if mt_ns.method_type_printed == False %}  <!-- METHOD_TYPES -->
										<td>
											<div type="button" style="color:black;" id="purple_title" 
															   onclick="myFunction('{{method_type.id}}')">
												סוג: {{ method_type.title }} 			
											</div>
											
											<div type="button" id="{{method_type.id}}" class="w3-hide  w3-center purple_body">
												{{method_type.body}}
											</div>
										</td>
										{% set mt_ns.method_type_printed = True %}
									{% else %}
										<td></td>
									{% endif %}  <!-- END METHOD_TYPES -->
									

									<td>  <!-- METHODS -->
			
										<div type="button" style="color:black;" id="purple_title" 
														   onclick="myFunction('{{method.id}}')">
											{{ method.title }}   

										</div>
												
										<div type="button" style="color:black;" id="{{method.id}}" 
														   class="w3-hide  w3-center purple_body">
											{{method.body}}
										</div>
										{% set m_ns.method_printed = True %}
									</td>
									
										
										<td>  <!-- WHOS -->
				
											<div type="button" style="color:black;" id="purple_title" 
															   onclick="myFunction('{{method.id}}')">
												{{ who.title }}   

											</div>
													
											<div type="button" style="color:black;" id="{{method.id}}" 
															   class="w3-hide  w3-center purple_body">
												{{who.body}}
											</div>
											{% set m_ns.method_printed = True %}
										</td>  <!-- END WHOS -->
										
									{% endfor %}  <!-- WHOS -->
									
									{% if m_ns.method_printed == False %}
										<td></td>
									{% endif %}  <!-- END METHODS -->
								</tr>
									
					
							{% endfor %}  <!-- METHODS -->
						{% endfor %}  <!-- METHOD-TYPESS -->
						
								
							</table>   <!-- MEYHODS PURPLE TABLE -->
							</td>
							
						{% include "destinations/dsts_table_2/goal_with_no_methods.html" %}
					
					{% endfor %}    <!-- END GOALS -->
					
					{% if g_ns.goal_printed == False %}  <!-- IN CASE NO GOALS DST DIDN'T ENTER DST LOOP --> 
						{% include "destinations/dsts_table_2/dst_with_no_goals.html" %}
					{% endif %}  <!-- END DSTS -->
				
			{% endfor %}    <!-- DSTS -->
	{% endfor %}  <!-- TAGS -->

		
<script>
function myFunction(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}
</script>
		
				
{% endblock plan_report_show_std_dsts %}