
{% block edit_one_std_dst_goal %}

	<table class="purple_table">

		<tr>
			<th style="background:#ffffff" colspan="5"></th>
		</tr>
		
		<tr style="width:100%">
			<th style="background:#dcbae6; color:black" colspan="6"> עדכן יעדים להשגת המטרה </th>
		</tr>
				
		<tr>			
			<th> מספר היעד </th>	
			<th> כותרת היעד </th>
			<th> תאור היעד </th>
			<th> תאריך השלמת היעד </th>
			<th> סטאטוס היעד </th>
		</tr>
						
		<tr>
		
			<td>{{ goal.id }}</td>
			<td>{{ goal.title }}</td>
			<td>{{ goal.body }}</td> 

			<td>
				<div id="ar_div">				
					{% for st in std_txts %}
						{% if st.general_txt_id==goal.id %}
							<input type="date" style="text-align:center" id="due_date" name="due_date{{ goal.id }}" value="{{ st.due_date }}">
						{% endif %}	
					{% endfor %}
				</div>   <!-- ar_div -->
			</td>	


			<td>סטאטוס:
				<select class="select" name="sts{{ goal.id }}" id="selected_status">	
					{% for sts in statuss %}	
						{% for st in std_txts %}
							{% if st.general_txt_id==goal.id %}
								{% if st.status_id==sts.id %}
									<option value="{{ sts.id }}" selected="selected">{{ sts.title }}</option>
								{% else %}
									<option value="{{ sts.id }}">{{ sts.title }}</option>
								{% endif %}
							{% endif %}
						{% endfor %}
					{% endfor %}
				</select>					
			</td>
			
			<td>								
				{% set goal_num = goal.id * 3 + 1 %}
				<button class="btn btn-success btn-xs" type="submit" name="txt_type_form_button_name" value="{{ goal_num }}">שמור</button>
			</td>
									
		</tr>
	
	<tr>				
		{% for todo in student_todos %}
			{% if todo in goal.children.all() %}
				{% if todo in student_todos %}
					{% include "./destinations/goals/todos/goal_todos_table_line.html" %}
				{% endif %}
			{% endif %}
		{% endfor %}
	</tr>
	
	<tr>				
		{% for todo in todos_not_of_student %}
			{% include "./destinations/goals/todos/goal_todos_table_line_not_of_std.html" %}
		{% endfor %}
	</tr>
		
<!-- FROM https://stackoverflow.com/questions/18091866/background-color-of-selected-option -->
			
	</table>

<script type="text/javascript" src="{{ url_for('static', filename='js/tree_list_plus.js') }}"></script>
<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].onclick = function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight){
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    } 
  }
}
</script>


<!-- call match_goal function for save goal details when submit button is pushed by the user -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type=text/javascript>
        $(function() {
          $('a#test').bind('click', function() {
            $.getJSON('/match_goal_to_std2',
                function(data) {
              //do nothing
            });
            return false;
          });
        });
</script>

{% endblock edit_one_std_dst_goal %}